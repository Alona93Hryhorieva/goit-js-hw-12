{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryItemMarkup = images => {\n    return images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, view, comments, downloads }) => {\n                return (\n                    `<li class=\"image-card\">\n                       <a class=\"image-link js-image-link\" href=\"${largeImageURL}\">\n                         <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\">\n                      </a>\n                      \n                      <div class=\"image-details\">\n                         <ul class=\"image-descr\">\n                             <li class=\"image-descr-det\">\n                                  <h3 class=\"title-info\">Likes</h3>\n                                  <p class=\"paragraph-info\">${likes}</p>\n                                </li>\n                                <li class=\"image-descr-det\">\n                                 <h3 class=\"title-info\">Views</h3>\n                                 <p class=\"paragraph-info\">${view}</p>\n                               </li>  \n                             <li class=\"image-descr-det\">\n                                 <h3 class=\"title-info\">Comments</h3>\n                                 <p class=\"paragraph-info\">${comments}</p>\n                             </li>  \n                              <li class=\"image-descr-det\">\n                                  <h3 class=\"title-info\">Downloads</h3>\n                                  <p class=\"paragraph-info\">${downloads}</p>\n                              </li>\n                 \n                            </ul>\n                      </div>\n                  </li>`\n                );\n            }\n    \n        ).join('');\n}","import axios from \"axios\"\n\nconst API_KEY = '43820023-fa202629be5215ad836dbfc98';\nconst API_URL = 'https://pixabay.com/api/?key=$\"{API_KEY}\"&amp; q=$\"{encodeURIComponent(currentQuery)}\"&amp;page=$\"{currentPage}\"&amp;per_page=$\"{perPage}\"';\n\nexport const fetchData = async (queryString, page) => {\n  const searchParams = await axios.get(API_URL, {\n    params: {\n      key: API_KEY,\n      q: queryString,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n\n  return searchParams;\n\n};\n\n\n \n\n\n\n\n\n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryItemMarkup } from './js/render-functions.js';\nimport { fetchData } from './js/pixabay-api.js';\n\nconst galleryStyles = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst searchForm = document.querySelector('.search-form');\nconst listGallery = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.gallery-btn');\n\nlet searchQuery = '';\nlet currentPage = 1;\nlet totalPages;\n\nasync function onSearchFormSubmit(event) {\n    event.preventDefault();\n    currentPage = 1;\n    \n    try {\n        searchQuery = event.target.elements.searchKeyword.value.trim();\n        listGallery.innerHTML = '';\n        loadMoreBtn.classList.add('is-hidden');\n\n        if (searchQuery === '') {\n            event.currentTarget.reset();\n            return iziToast.error({\n                message: 'Input field cannot be empty',\n                position: 'topRight',\n                timeout: 2000,\n                color: 'red',\n            });\n        }\n\n        const responseInfo = await fetchData(searchQuery, currentPage);\n        console.log(responseInfo);\n        loader.classList.remove('is-hidden');\n\n        const imageArray = responseInfo.data.hits;\n        console.log(imageArray);\n        const totalImages = responseInfo.data.totalHits;\n        const perPage = responseInfo.config.params.per_page;\n        totalPages = Math.ceil(totalImages / perPage);\n\n        if (!imageArray.length) {\n            loader.classList.add('is-hidden');\n            event.target.reset();\n            return iziToast.error({\n                message:\n                    'Photo not found',\n                timeout: 2000,\n                position: 'topRight',\n                color: 'red',\n            });\n        }\n\n        loader.classList.add('is-hidden');\n        const galleryMarkup = createGalleryItemMarkup(imageArray);\n        listGallery.innerHTML = galleryMarkup;\n\n        if (totalPages > 1) {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n\n        event.target.reset();\n        galleryStyles.refresh();\n    } catch (error) {\n        loader.classList.add('is-hidden');\n        loadMoreBtn.classList.add('is-hidden');\n        return iziToast.error({\n            message:\n                'Sorry, an error occurred',\n            timeout: 2000,\n            position: 'topRight',\n            color: 'red',\n        });\n    }\n}\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\n\nasync function onClickLoadMoreBtn() {\n try {\n      currentPage++;\n     loader.classList.remove('is-hidden');\n\n     const loadMoreData = await fetchData(searchQuery, currentPage);\n     const imageArray = loadMoreData.data.hits;\n     const newGalleryMarkup = await createGalleryItemMarkup(imageArray);\n    \n     loader.classList.add('is-hidden');\n     listGallery.innerHTML += newGalleryMarkup;\n     \n     const imageCard = document.querySelector('.image-card');\n     const rect = imageCard.getBoundingClientRect();\n     window.scrollBy({\n      top: rect.height * 2,\n      behavior: 'smooth',\n     });\n\n     listGallery.refresh();\n\n     if (currentPage >= totalPages) {\n         loadMoreBtn.classList.add('is-hidden');\n         return iziToast.info({\n              position: 'topRight',\n              message: \"We're sorry, there are no more pictures to load\",\n             timeout: 2000,\n             color: 'blue',\n           });\n       }\n    } catch (error) {\n     loader.classList.add('is-hidden');\n     loadMoreBtn.classList.add('is-hidden');\n     return new Error('Sorry, an error occurred');\n    }\n}\n\nloadMoreBtn.addEventListener('click', onClickLoadMoreBtn);\n"],"names":["createGalleryItemMarkup","images","webformatURL","largeImageURL","tags","likes","view","comments","downloads","API_KEY","API_URL","fetchData","queryString","page","axios","galleryStyles","SimpleLightbox","searchForm","listGallery","loader","loadMoreBtn","searchQuery","currentPage","totalPages","onSearchFormSubmit","event","iziToast","responseInfo","imageArray","totalImages","perPage","galleryMarkup","onClickLoadMoreBtn","newGalleryMarkup","rect"],"mappings":"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"}