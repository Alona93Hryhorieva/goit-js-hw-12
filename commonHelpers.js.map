{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nconst API_KEY = '43820023-fa202629be5215ad836dbfc98';\nconst API_URL = 'https://pixabay.com/api/?key=$\"{API_KEY}\"&amp; q=$\"{encodeURIComponent(currentQuery)}\"&amp;page=$\"{currentPage}\"&amp;per_page=$\"{perPage}\"';\n\nexport const fetchData = async (queryString, page) => {\n  const searchParams = await axios.get(API_URL, {\n    params: {\n      key: API_KEY,\n      q: queryString,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n\n  return searchParams;\n\n  // try {\n  //   const response = await fetch(API_URL);\n  //   const data = await response.json();\n\n  //   if (data.hits.length > 0) {\n  //     createGalleryItemMarkup(data.hits);\n  //     loadMoreBtn.classList.remove('is-hidden');\n  //     } else {\n  //      loadMoreBtn.classList.add('is-hidden');\n  //   }\n    \n  // } catch (error) {\n  //   console.error('Error fetching images:', error);\n    \n  // } finally {\n  //   loader.classList.add('is-hidden');\n  // }\n};\n\n\n \n\n\n\n\n\n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryItemMarkup } from './js/render-functions.js';\nimport { fetchData } from './js/pixabay-api.js';\n\nconst galleryStyles = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst searchForm = document.querySelector('.search-form');\nconst listGallery = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.gallery-btn');\n\nlet searchQuery = '';\nlet currentPage = 1;\n// let totalPages;\n\n\n\nasync function onSearchFormSubmit(event) {\n    event.preventDefault();\n    currentPage = 1;\n    \n    try {\n        searchQuery = event.target.elements.searchKeyword.value.trim();\n        listGallery.innerHTML = '';\n        loadMoreBtn.classList.add('is-hidden');\n\n        if (searchQuery === '') {\n            event.currentTarget.reset();\n            return iziToast.error({\n                message: 'Input field cannot be empty',\n                position: 'topRight',\n                timeout: 2000,\n                color: 'red',\n            });\n        } \n        \n        loader.classList.remove('is-hidden');\n\n        const searchParamsObj = await fetchData(searchQuery, page);\n        console.log(searchParamsObj);\n\n\n\n    \n\n\n\n\n\n    } catch (error) {\n        \n    }\n\n\n\n}\n\n\n\n\n    \n\n  \n        \n        \n\n\n\n\n\n    \n\n//     fetchPhotosByQuery(searchQuery)\n//         .then(imagesData => {\n//             console.log('Received data:', imagesData); \n\n//             if (imagesData.hits.length === 0 || !imagesData.hits) {\n//                 iziToast.show({\n//                     message: 'Sorry, there are no images for this query',\n//                     position: 'topRight',\n//                     timeout: 2000,\n//                     color: 'red',\n//                 });\n\n//                 listGallery.innerHTML = '';\n//                 return;\n//             }\n\n//             listGallery.innerHTML = createGalleryItemMarkup(imagesData.hits);\n\n//             if (lightbox) {\n//                 lightbox.destroy();\n//             }\n//             lightbox = new SimpleLightbox('.js-gallery a', {\n//                 captionDelay: 250,\n//             });\n//         })\n        \n//         .catch(error => {\n//             console.error('Error fetching photos:', error);\n//             iziToast.show({\n//                 message: 'An error occurred while fetching photos',\n//                 position: 'topRight',\n//                 timeout: 2000,\n//                 color: 'red',\n//             });\n//         })\n\n//         .finally(() => {\n//             event.target.reset();\n//             loader.classList.add('is-hidden');\n//         });\n// }\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n"],"names":["API_KEY","API_URL","fetchData","queryString","page","axios","SimpleLightbox","searchForm","listGallery","loader","loadMoreBtn","searchQuery","onSearchFormSubmit","event","iziToast","searchParamsObj"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAU,6IAEHC,EAAY,MAAOC,EAAaC,IACtB,MAAMC,EAAM,IAAIJ,EAAS,CAC5C,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,ECPmB,IAAIE,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,cAAc,EAEzD,IAAIC,EAAc,GAMlB,eAAeC,EAAmBC,EAAO,CACrCA,EAAM,eAAc,EAGpB,GAAI,CAKA,GAJAF,EAAcE,EAAM,OAAO,SAAS,cAAc,MAAM,OACxDL,EAAY,UAAY,GACxBE,EAAY,UAAU,IAAI,WAAW,EAEjCC,IAAgB,GAChB,OAAAE,EAAM,cAAc,QACbC,EAAS,MAAM,CAClB,QAAS,8BACT,SAAU,WACV,QAAS,IACT,MAAO,KACvB,CAAa,EAGLL,EAAO,UAAU,OAAO,WAAW,EAEnC,MAAMM,EAAkB,MAAMb,EAAUS,EAAa,IAAI,EACzD,QAAQ,IAAII,CAAe,CAU9B,MAAe,CAEf,CAIL,CA2DAR,EAAW,iBAAiB,SAAUK,CAAkB"}